circuit Mimc {
    function mimc7(x:field, secret_key:field) -> field{
        const constant: [field;91] =
            [
                0,
                4000037912085242607980777333103113486548706624468037011344473634759928092899,
                6820664364006652314311326973147494137215856124055336888532271229835336078152,
                8334177627492981984476504167502758309043212251641796197711684499645635709656,
                1374324219480165500871639364801692115397519265181803854177629327624133579404,
                2998126934235973970384740920478629915185987240808552504967960532833883753431,
                2558901189096558760448896669327086721003508630712968559048179091037845349145,
                2745516845864381930571316836816963619814059842763220969802512234209908837348,
                3262966573163560839685415914157855077211340576201936620532175028036746741754,
                140991392686484452906182218317388668800032055059159324740711825869070693648,
                4614037031668406927330683909387957156531244689520944789503628527855167665518,
                2758433497913177542616317291052030236361320515634370538496795423333578622576,
                5040699236106090655289931820723926657076483236860546282406111821875672148900,
                2632385916954580941368956176626336146806721642583847728103570779270161510514,
                802488353120834587100221628297115444533664164402024178078094186725925176589,
                3038345959687306222311554078710114904130052392639281723007156246053495324142,
                8360838254132998143349158726141014535383109403565779450210746881879715734773,
                4219359494603878087242561384461028700215878450633206110993264193370639050484,
                3067001377342968891237590775929219083706800062321980129409398033259904188058,
                92010119950587342426467459409398394288214213048705308168654023870548720548,
                2936520855321441392061521059641597209359936033297677875018473901325886907710,
                8259003394585469700691865409194092223721587567594984705232747431496510078551,
                4616774511849279946614614625671721433086586890525579192497355770824002141460,
                2420313048196782283269077029162229336342008468388159202031766961051598553530,
                1591191814586223845542928476945939809181477587891777779811016561624277080733,
                3446968588058668564420958894889124905706353937375068998436129414772610003289,
                4653317306466493184743870159523234588955994456998076243468148492375236846006,
                42249394161352612251108582795325352124323863109279196068384369699001692985,
                250710584458582618659378487568129931785810765264752039738223488321597070280,
                2104159799604932521291371026105311735948154964200596636974609406977292675173,
                7869100856409338915551014962459106403382404186389630029598521920646080139798,
                6032365105133504724925793806318578936233045029919447519826248813478479197288,
                5580656384419496298066621339182675683742720715147990827833633584089133559433,
                7400123822125662712777833064081316757896757785777291653271747396958201309118,
                1744432620323851751204287974553233986555641872755053103823939564833813704825,
                8316378125659383262515151597439205374263247719876250938893842106722210729522,
                6739722627047123650704294650168547689199576889424317598327664349670094847386,
                4322534367260724683452083932143421736961535260616774863376482595129652046080,
                5273650783316841393161478352992822678144758603587928951460996408977475917486,
                5264534817993325015357427094323255342713527811596856940387954546330728068658,
                1995213998257567078927434126248929270858139091485260044139935501005183711369,
                5148596049900083984813839872929010525572543381981952060869301611018636120248,
                2910762899918065739472534775297690399109195119705092243276674225992900184592,
                2351955152747671855866798852095939881591153938742115613024105923837387506755,
                2101723499962022271333699615385984138574055941739389684853045489824998914151,
                5507959600969845538113649209272736011390582494851145043668969080335346810411,
                1288828238882412489655567821211417122944989349069722589390008122741232342009,
                2714521234327249260995074222719021549274533696268805006923666422429465429475,
                2103812937396054977100423343432033514975614756277651769506502826069863954099,
                1823201861560942974198127384034483127920205835821334101215923769688644479957,
                3423127912765051763296691302041864693966169374446670425724571191016936885904,
                1829645857879599710118729530881719466212267750211549450274626006647955865531,
                2086316002831259701315853542116311322431737784885112985238916773326326757798,
                3597660227735277964839495966893925411504574099903732962817494398587409900949,
                4246251361285666145166343856418609984841275670496081594985329238504896961445,
                497503788006778246803722536197652686530845060321532341282618227230938189123,
                2216432659854733047132347621569505613620980842043977268828076165669557467682,
                6309765381643925252238633914530877025934201680691496500372265330505506717193,
                3917399693217204553365138728240038698423340406386340558156760967117229315308,
                4037040458505567977365391535756875199663510397600316887746139396052445718861,
                3060050584827497396823711963141234889712371426824280268990702329905228084591,
                845322671528508199439318170916419179535949348988022948153107378280175750024,
                7777922852316062996337157300331910646083702852714396780630056464388736150341,
                1787657116422741805081529060357458613751847282065260416605960800849332194298,
                6699067738555349409504843460654299019000594109597429103342076743347235369120,
                6220784880752427143725783746407285094967584864656399181815603544365010379208,
                6129250029437675212264306655559561251995722990149771051304736001195288083309,
                2328784033690380297206169300466467339446866380114259694360488894990634154563,
                4490242021765793917495398271905043433053432245571325177153467194570741607167,
                2708071618462739340568392052487913524137109495022192010139931980659866300444,
                837850695495734270707668553360118467905109360511302468085569220634750561083,
                3359461061947996790942912087375898763105506969627262821781848721476776664866,
                1756836575481326830856441019999234919602149921777415161824214733194984267551,
                5120233732886518393327526124826972596326512201398793635746827305657691684883,
                818346459208603029952595884984593151006073905589477202724541832591512123683,
                173271062536305557219323722062711383294158572562695717740068656098441040230,
                1231507391692669437919941627966011638150144654464048116165181200102999759287,
                3595571669278331645054864342123008902455045027486006111042524238349519457545,
                2266727796848462610978155336303571288096805653193124283979596396484935208423,
                3526838000049832369413157423016871811239601208335717478440824812009027918256,
                1396387224260049207650946658786282559493870340065547147983644680607004574896,
                7069216248902547653615508023941692395371990416048967468982099270925308100727,
                6465151453746412132599596984628739550147379072443683076388208843341824127379,
                7699071108960800536441522803696432295454612334612466214168900846878945906744,
                2473659805558112812478754532645396504215819455664249521109900312788673941565,
                1702213613534733786921602839210290505213503664731919006932367875629005980493,
                2337363655048165390036564963784287366271045876873528545575455753817403053286,
                4212716923652881254737947578600828255798948993302968210248673545442808456151,
                7594017890037021425366623750593200398174488805473151513558919864633711506220,
                2090965748889531207466279364033269536568908240543954821730348910647373716319,
                5157677480384860925138060174375355262285819845746331990974486302233046261492
            ];

        for i in 0..91{
            let new_x = (x+constant[i]+secret_key);
            x = new_x*new_x*new_x*new_x*new_x*new_x*new_x;
        }

        /*
            let mut h: Fr = Fr::zero();
            for i in 0..self.constants.n_rounds {
                let mut t: Fr;
                if i == 0 {
                    t = x_in.clone();
                    t.add_assign(k);
                } else {
                    t = h.clone();
                    t.add_assign(&k);
                    t.add_assign(&self.constants.cts[i]);
                }
                let mut t2 = t.clone();
                t2.square();
                let mut t7 = t2.clone();
                t7.square();
                t7.mul_assign(&t2);
                t7.mul_assign(&t);
                h = t7.clone();
            }
            h.add_assign(&k);
        */
        return x;
    }
}
